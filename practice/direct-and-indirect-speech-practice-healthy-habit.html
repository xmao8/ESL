<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="/favicon.png" type="image/png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Direct ‚Üí Indirect Speech ‚Äì Healthy Habits (Worksheet)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet" />
  <style>
    /* General body and container styles */
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f9;
      text-align: center;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    nav { background: #124076; margin: 0; padding: 0; }
    .nav-container {
      display: flex; align-items: center; justify-content: space-between;
      width: 100%; max-width: 1100px; margin: 0 auto; padding: 0.8rem 1rem;
    }
    .logo { display: flex; align-items: center; color: #ff9800; font-family: 'Poppins', sans-serif; font-weight: 700; font-size: 1.3rem; text-decoration: none; }
    .logo-img { width: 32px; height: 32px; margin-right: 0.5rem; }
    .nav-links { display: flex; gap: 1rem; }
    .nav-links a { color: white; font-weight: 700; text-decoration: none; transition: color 0.2s ease; }
    .nav-links a:hover, .nav-links a:focus { color: #ffbb33; outline: none; }
    .menu-toggle { display: none; flex-direction: column; gap: 5px; background: none; border: none; cursor: pointer; padding: 0; }
    .menu-toggle .bar { width: 25px; height: 3px; background: white; border-radius: 2px; }

    /* --- Phone Layout --- */
    @media (max-width: 600px) {
      .nav-links {
        position: fixed; top: 56px; right: 0; background: #124076; flex-direction: column; width: 100%;
        height: calc(100vh - 56px); padding: 1rem 1.5rem 2rem 1.5rem; gap: 1.2rem; overflow-y: auto;
        transform: translateX(100%); transition: transform 0.3s ease; border-radius: 0 0 0 10px; z-index: 999; align-items: flex-start;
      }
      .nav-links.active { transform: translateX(0); }
      .menu-toggle { display: flex; }
      h1, .content-container, .buttons { padding: 0 1rem; }
    }
    /* --- Tablet Layout --- */
    @media (min-width: 601px) and (max-width: 900px) {
      .nav-container { padding: 0.8rem 1.5rem; }
      .nav-links { position: static; flex-direction: row; background: none; height: auto; width: auto; padding: 0; gap: 1.3rem; transform: none !important; border-radius: 0; align-items: center; overflow: visible; }
      .menu-toggle { display: none; }
      h1, .content-container, .buttons { padding: 0 1.5rem; }
    }
    /* --- Desktop Layout --- */
    @media (min-width: 901px) {
      .nav-container { max-width: 1100px; margin: 0 auto; padding: 0.8rem 1rem; }
      .nav-links { position: static; flex-direction: row; background: none; height: auto; width: auto; padding: 0; gap: 1.5rem; transform: none !important; border-radius: 0; align-items: center; overflow: visible; }
      .menu-toggle { display: none; }
      body { padding: 0; }
      h1, .content-container, .buttons { padding: 0; }
    }

    /* Content specific styles */
    h1 { margin: 2rem auto 1.5rem auto; color: #2c3e50; max-width: 800px; }
    .content-container {
      background: white; width: 90%; max-width: 800px; margin: 2rem auto; padding: 2rem; border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1); text-align: left; line-height: 1.6; font-size: 1.05rem;
    }
    .content-container h2 { color: #3498db; margin-top: 1.5rem; margin-bottom: 0.8rem; font-size: 1.5rem; }
    .content-container p { margin-bottom: 1rem; }
    .question-item { margin-bottom: 1.1rem; }
    .question-text { margin: 0 0 0.2rem 0; }
    .inline-feedback { margin-left: 0.5rem; font-style: italic; display: none; }
    .inline-feedback.correct { color: #27ae60; display: inline; }
    .inline-feedback.incorrect { color: #c0392b; display: inline; }

    .buttons { margin: 2rem auto 3rem auto; display: flex; justify-content: center; gap: 1rem; max-width: 650px; }
    button, .buttons a {
      padding: 0.6rem 1.2rem; background: #3498db; color: white; border: none; border-radius: 8px; font-weight: bold;
      cursor: pointer; text-decoration: none; display: inline-block; user-select: none;
    }
    button:hover, .buttons a:hover { background: #2980b9; }
    .submit-button { background-color: #4CAF50; }
    .submit-button:hover { background-color: #45a049; }
    .show-answers { background-color: #f44336; }
    .show-answers:hover { background-color: #d32f2f; }
    .reset-button { background-color: #7f8c8d; }
    .reset-button:hover { background-color: #707b7c; }
    .answers-section { display: none; margin-top: 2rem; border-top: 2px solid #ccc; padding-top: 1rem; }
    .answers-section h3 { color: #4CAF50; }
    .answers-section ol { text-align: left; padding-left: 20px; }
    .answers-section li { margin-bottom: 0.9rem; border-bottom: 1px solid #eee; padding-bottom: 0.7rem; }

    /* Input styling */
    .full-line-input {
      width: 100%;
      max-width: 100%;
      padding: 0.5rem 0.6rem;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 1rem;
      margin-top: 0.35rem;
    }
    .full-line-input.correct { border-color: #27ae60; }
    .full-line-input.incorrect { border-color: #c0392b; }
    .quote {
      background: #f8fbff; border-left: 4px solid #3498db;
      padding: 0.6rem 0.8rem; border-radius: 6px; font-style: italic;
    }
  </style>
</head>
<body>

<nav aria-label="Main navigation">
  <div class="nav-container">
    <a href="../index.html" class="logo" aria-label="ESLnote Home">
      <img src="/favicon.png" alt="ESLnote Logo" class="logo-img" />
      <span class="site-name">ESLnote</span>
    </a>

    <button id="menuToggle" class="menu-toggle" aria-controls="primary-navigation" aria-expanded="false" aria-label="Toggle menu">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>

    <div class="nav-links" id="primary-navigation">
      <a href="../index.html">Home</a>
      <a href="../flashcards.html">Flashcards</a>
      <a href="../conversation.html">Conversations</a>
      <a href="../grammar.html">Grammar</a>
      <a href="../reading.html">Reading</a>
      <a href="../listening.html">Listening</a>
      <a href="../practice.html">Practices</a>
    </div>
  </div>
</nav>

<h1>Direct ‚Üí Indirect Speech ‚Äî Healthy Habits</h1>

<div class="content-container">
  <p><strong>Instructions:</strong> Change each sentence from <strong>direct speech</strong> to <strong>indirect (reported) speech</strong>. Write one complete reported sentence for each item in the box provided.</p>

  <h2>Practice (15 items)</h2>
  <div id="worksheet"></div>

  <div class="buttons">
    <button id="submitBtn" class="submit-button">Submit Answers</button>
    <button id="showAnswersBtn" class="show-answers" style="display:none;">Show Answers</button>
    <button id="resetBtn" class="reset-button">Reset</button>
  </div>

  <div id="results" class="answers-section">
    <h3>Your Results</h3>
    <p>You got <span id="correctCount">0</span> out of <span id="totalCount">0</span> correct.</p>
    <h3>Answer Key</h3>
    <ol id="answerKey"></ol>
  </div>
</div>

<div class="buttons">
  <a href="../practice.html">‚Üê Back to Practice</a>
  <a href="../index.html">üè† Home</a>
</div>

<script>
  // Mobile nav toggle
  const menuToggle = document.getElementById('menuToggle');
  const navLinks = document.getElementById('primary-navigation');
  if (menuToggle && navLinks) {
    menuToggle.addEventListener('click', () => {
      const expanded = menuToggle.getAttribute('aria-expanded') === 'true' || false;
      menuToggle.setAttribute('aria-expanded', String(!expanded));
      navLinks.classList.toggle('active');
    });
    navLinks.querySelectorAll('a')?.forEach(link => {
      link.addEventListener('click', () => {
        if (navLinks.classList.contains('active')) {
          navLinks.classList.remove('active');
          menuToggle.setAttribute('aria-expanded', 'false');
        }
      });
    });
  }

  // ----- Worksheet items -----
  // Each item: direct quote shown; student writes full indirect sentence (blank only).
  // 'keys' includes acceptable variants. We normalize user input heavily.
  const items = [
    {
      direct: `Tom said, ‚ÄúI drink water every morning.‚Äù`,
      keys: [
        "tom said that he drank water every morning",
        "tom said he drank water every morning",
        "tom said that he drinks water every morning",
        "tom said he drinks water every morning"
      ]
    },
    {
      direct: `Maria said, ‚ÄúI go jogging three times a week.‚Äù`,
      keys: [
        "maria said that she went jogging three times a week",
        "maria said she went jogging three times a week",
        "maria said that she goes jogging three times a week",
        "maria said she goes jogging three times a week"
      ]
    },
    {
      direct: `The doctor said, ‚ÄúYou need to sleep at least 7 hours.‚Äù`,
      keys: [
        "the doctor said that i needed to sleep at least 7 hours",
        "the doctor said i needed to sleep at least 7 hours",
        "the doctor said that i need to sleep at least 7 hours",
        "the doctor said i need to sleep at least 7 hours",
        "the doctor said that i needed to sleep at least seven hours",
        "the doctor said i needed to sleep at least seven hours"
      ]
    },
    {
      direct: `Sarah said, ‚ÄúI have started a yoga class.‚Äù`,
      keys: [
        "sarah said that she had started a yoga class",
        "sarah said she had started a yoga class"
      ]
    },
    {
      direct: `John said, ‚ÄúI ate vegetables for lunch.‚Äù`,
      keys: [
        "john said that he had eaten vegetables for lunch",
        "john said he had eaten vegetables for lunch"
      ]
    },
    {
      direct: `Emma asked, ‚ÄúDo you eat breakfast every day?‚Äù`,
      keys: [
        "emma asked if i ate breakfast every day",
        "emma asked whether i ate breakfast every day",
        "emma asked if i eat breakfast every day",
        "emma asked whether i eat breakfast every day"
      ]
    },
    {
      direct: `The teacher asked, ‚ÄúCan you avoid junk food?‚Äù`,
      keys: [
        "the teacher asked if we could avoid junk food",
        "the teacher asked whether we could avoid junk food",
        "the teacher asked if we can avoid junk food",
        "the teacher asked whether we can avoid junk food"
      ]
    },
    {
      direct: `My friend asked, ‚ÄúWill you join me at the gym tomorrow?‚Äù`,
      keys: [
        "my friend asked if i would join him at the gym the next day",
        "my friend asked whether i would join him at the gym the next day",
        "my friend asked if i would join her at the gym the next day",
        "my friend asked whether i would join her at the gym the next day",
        "my friend asked if i would join him at the gym the following day",
        "my friend asked if i would join her at the gym the following day"
      ]
    },
    {
      direct: `The coach asked, ‚ÄúWhen do you usually exercise?‚Äù`,
      keys: [
        "the coach asked when i usually exercised",
        "the coach asked when i usually exercise"
      ]
    },
    {
      direct: `The doctor asked, ‚ÄúHow much water do you drink each day?‚Äù`,
      keys: [
        "the doctor asked how much water i drank each day",
        "the doctor asked how much water i drink each day"
      ]
    },
    {
      direct: `Anna asked, ‚ÄúWhere do you usually buy healthy food?‚Äù`,
      keys: [
        "anna asked where i usually bought healthy food",
        "anna asked where i usually buy healthy food"
      ]
    },
    {
      direct: `Dad asked, ‚ÄúWhy are you skipping your morning run?‚Äù`,
      keys: [
        "dad asked why i was skipping my morning run"
      ]
    },
    {
      direct: `The doctor said, ‚ÄúDrink more water.‚Äù`,
      keys: [
        "the doctor told me to drink more water"
      ]
    },
    {
      direct: `Mom said, ‚ÄúDon‚Äôt eat too much sugar.‚Äù`,
      keys: [
        "mom told me not to eat too much sugar"
      ]
    },
    {
      direct: `The trainer said, ‚ÄúPlease stretch before exercising.‚Äù`,
      keys: [
        "the trainer asked me to stretch before exercising",
        "the trainer told me to stretch before exercising"
      ]
    }
  ];

  // ----- Rendering -----
  function renderWorksheet() {
    const wrap = document.getElementById('worksheet');
    wrap.innerHTML = '';
    items.forEach((it, idx) => {
      const block = document.createElement('div');
      block.className = 'question-item';
      block.innerHTML = `
        <p class="question-text"><strong>${idx + 1}.</strong> <span class="quote">${it.direct}</span></p>
        <label class="sr-only" for="q-${idx}">Write the indirect speech for item ${idx + 1}</label>
        <input id="q-${idx}" type="text" class="full-line-input" placeholder="Write the indirect (reported) sentence here‚Ä¶" />
        <span id="fb-${idx}" class="inline-feedback"></span>
      `;
      wrap.appendChild(block);
    });
    document.getElementById('totalCount').textContent = String(items.length);
    // populate answer key (for teachers)
    const keyList = document.getElementById('answerKey');
    keyList.innerHTML = items.map(it => `<li>${capitalize(it.keys[0])}.</li>`).join('');
  }

  // ----- Utilities -----
  const normalize = s => s
    .toLowerCase()
    .replace(/[‚Äú‚Äù"]/g, '"')
    .replace(/‚Äô/g, "'")
    .replace(/\s+that\s+/g, ' ')     // make "that" optional
    .replace(/\s+/g, ' ')
    .replace(/[.?!]+$/g, '')         // trim end punctuation
    .trim();

  const capitalize = s => s.charAt(0).toUpperCase() + s.slice(1);

  function checkAll() {
    let correct = 0;
    items.forEach((it, idx) => {
      const input = document.getElementById(`q-${idx}`);
      const fb = document.getElementById(`fb-${idx}`);
      const user = normalize(input.value);
      const ok = it.keys.map(normalize).includes(user);
      input.classList.remove('correct', 'incorrect');
      if (ok) {
        correct++;
        input.classList.add('correct');
        fb.textContent = ' ‚úì';
        fb.className = 'inline-feedback correct';
        fb.style.display = 'inline';
      } else {
        input.classList.add('incorrect');
        fb.textContent = ` ‚úó`;
        fb.className = 'inline-feedback incorrect';
        fb.style.display = 'inline';
      }
    });
    document.getElementById('correctCount').textContent = String(correct);
    document.getElementById('results').style.display = 'block';
    document.getElementById('showAnswersBtn').style.display = 'inline-block';
    document.getElementById('submitBtn').style.display = 'none';
  }

  function toggleAnswers() {
    const btn = document.getElementById('showAnswersBtn');
    const showing = btn.textContent === 'Hide Answers';
    const key = document.getElementById('answerKey');
    key.style.display = showing ? 'none' : 'block';
    btn.textContent = showing ? 'Show Answers' : 'Hide Answers';
  }

  function resetAll() {
    items.forEach((_, idx) => {
      const input = document.getElementById(`q-${idx}`);
      const fb = document.getElementById(`fb-${idx}`);
      input.value = '';
      input.classList.remove('correct', 'incorrect');
      fb.textContent = '';
      fb.style.display = 'none';
    });
    document.getElementById('results').style.display = 'none';
    document.getElementById('showAnswersBtn').style.display = 'none';
    document.getElementById('showAnswersBtn').textContent = 'Show Answers';
    document.getElementById('submitBtn').style.display = 'inline-block';
  }

  // Init
  renderWorksheet();
  document.getElementById('submitBtn').addEventListener('click', checkAll);
  document.getElementById('showAnswersBtn').addEventListener('click', toggleAnswers);
  document.getElementById('resetBtn').addEventListener('click', resetAll);
</script>
</body>
</html>
