<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="/favicon.png" type="image/png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Have/Get Something Done ‚Äî Daily Life & Shopping ¬∑ ESLnote Practice</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet" />
  <style>
    /* General body and container styles */
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f9;
      text-align: center;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      color: #333;
    }
    nav { background: #124076; margin: 0; padding: 0; }
    .nav-container {
      display: flex; align-items: center; justify-content: space-between;
      width: 100%; max-width: 1100px; margin: 0 auto; padding: 0.8rem 1rem;
    }
    .logo {
      display: flex; align-items: center; color: #ff9800;
      font-family: 'Poppins', sans-serif; font-weight: 700; font-size: 1.3rem; text-decoration: none;
    }
    .logo-img { width: 32px; height: 32px; margin-right: 0.5rem; }
    .nav-links { display: flex; gap: 1rem; }
    .nav-links a { color: white; font-weight: 700; text-decoration: none; transition: color 0.2s ease; }
    .nav-links a:hover, .nav-links a:focus { color: #ffbb33; outline: none; }
    .menu-toggle { display: none; flex-direction: column; gap: 5px; background: none; border: none; cursor: pointer; padding: 0; }
    .menu-toggle .bar { width: 25px; height: 3px; background: white; border-radius: 2px; }

    /* Responsive nav */
    @media (max-width: 600px) {
      .nav-links {
        position: fixed; top: 56px; right: 0; background: #124076;
        flex-direction: column; width: 100%; height: calc(100vh - 56px);
        padding: 1rem 1.5rem 2rem; gap: 1.2rem; overflow-y: auto;
        transform: translateX(100%); transition: transform 0.3s ease;
        border-radius: 0 0 0 10px; z-index: 999; align-items: flex-start;
      }
      .nav-links.active { transform: translateX(0); }
      .menu-toggle { display: flex; }
      h1, .content-container, .buttons { padding: 0 1rem; box-sizing: border-box; }
    }
    @media (min-width: 601px) and (max-width: 900px) {
      .nav-container { padding: 0.8rem 1.5rem; }
      .nav-links { position: static; flex-direction: row; background: none; height: auto; width: auto; padding: 0; gap: 1.3rem; transform: none !important; }
      .menu-toggle { display: none; }
      h1, .content-container, .buttons { padding: 0 1.5rem; box-sizing: border-box; }
    }
    @media (min-width: 901px) {
      .nav-container { max-width: 1100px; margin: 0 auto; padding: 0.8rem 1rem; }
      .nav-links { position: static; flex-direction: row; background: none; height: auto; width: auto; padding: 0; gap: 1.5rem; transform: none !important; }
      .menu-toggle { display: none; }
      h1, .content-container, .buttons { padding: 0; }
    }

    /* Content */
    h1 { margin: 2rem auto 1.2rem; color: #2c3e50; max-width: 860px; }
    .content-container {
      background: white; width: 90%; max-width: 860px; margin: 2rem auto; padding: 2rem;
      border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: left; line-height: 1.65; font-size: 1.06rem;
    }
    .content-container h2 { color: #3498db; margin: 1.4rem 0 0.8rem; font-size: 1.45rem; }
    .content-container p { margin-bottom: 1rem; }
    .content-container ol { list-style-type: decimal; padding-left: 20px; margin-bottom: 1rem; }
    .content-container li { margin-bottom: 0.85rem; }
    .content-container strong { color: #124076; }
    .hint { background: #f8fbff; border-left: 4px solid #3498db; padding: 0.8rem 1rem; border-radius: 8px; margin-bottom: 1rem; }

    /* Inputs & feedback */
    .blank-input {
      display: inline-block; min-width: 10ch; max-width: 38ch;
      padding: 0.25rem 0.4rem; border: 1px solid #cfd8dc; border-radius: 6px; font-size: 1rem; margin: 0 0.25rem;
    }
    .blank-input.short { min-width: 8ch; max-width: 20ch; }
    .blank-input.correct { border-color: #27ae60; }
    .blank-input.incorrect { border-color: #c0392b; }
    .inline-feedback { margin-left: 0.5rem; font-style: italic; display: none; }
    .inline-feedback.correct { color: #27ae60; display: inline; }
    .inline-feedback.incorrect { color: #c0392b; display: inline; }

    /* Buttons */
    .buttons {
      margin: 2rem auto 3rem; display: flex; justify-content: center; gap: 1rem; max-width: 620px;
    }
    button, .buttons a {
      padding: 0.6rem 1.2rem; background: #3498db; color: white;
      border: none; border-radius: 8px; font-weight: bold; cursor: pointer;
      text-decoration: none; display: inline-block; user-select: none;
    }
    button:hover, .buttons a:hover { background: #2980b9; }
    .submit-button { background-color: #4CAF50; }
    .submit-button:hover { background-color: #45a049; }
    .show-answers { background-color: #f44336; }
    .show-answers:hover { background-color: #d32f2f; }
    .reset-button { background-color: #7f8c8d; }
    .reset-button:hover { background-color: #707b7c; }

    /* Results */
    .answers-section { display: none; margin-top: 2rem; border-top: 2px solid #ccc; padding-top: 1rem; }
    .answers-section h3 { color: #4CAF50; }
    .answers-section p { margin: 0.3rem 0 0.8rem; }
  </style>
</head>
<body>

<nav aria-label="Main navigation">
  <div class="nav-container">
    <a href="../index.html" class="logo" aria-label="ESLnote Home">
      <img src="/favicon.png" alt="ESLnote Logo" class="logo-img" />
      <span class="site-name">ESLnote</span>
    </a>

    <button id="menuToggle" class="menu-toggle" aria-controls="primary-navigation" aria-expanded="false" aria-label="Toggle menu">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>

    <div class="nav-links" id="primary-navigation">
      <a href="../index.html">Home</a>
      <a href="../flashcards.html">Flashcards</a>
      <a href="../conversation.html">Conversations</a>
      <a href="../grammar.html">Grammar</a>
      <a href="../reading.html">Reading</a>
      <a href="../listening.html">Listening</a>
      <a href="../practice.html">Practices</a>
    </div>
  </div>
</nav>

<h1>Have/Get Something Done ‚Äî Daily Life & Shopping</h1>

<div class="content-container">
  <p class="hint">
    Type the correct <strong>causative</strong> form in each blank.<br>
    <strong>Form:</strong> <em>have/get + object + past participle</em>. You may use any correct tense (<em>have/has/had/get/gets/got</em>, or <em>am/is/are having/getting</em>, etc.).<br>
    <strong>Note:</strong> <em>get something done</em> can also mean <strong>finish/complete</strong> a task (not causative), e.g., ‚ÄúI need to <em>get this report done</em> by Friday.‚Äù
  </p>

  <h2>Part A ‚Äî Fill in the blanks (12)</h2>
  <ol id="partAList"></ol>

  <h2>Part C ‚Äî Rewrite the sentences (8)</h2>
  <ol id="partCList" start="13"></ol>

  <div class="buttons">
    <button id="submitBtn" class="submit-button">Submit Answers</button>
    <button id="showAnswersBtn" class="show-answers" style="display:none;">Show Answers</button>
    <button id="resetBtn" class="reset-button">Reset</button>
  </div>

  <div id="results" class="answers-section" aria-live="polite">
    <h3>Your Results</h3>
    <p>You got <span id="correctCount">0</span> out of <span id="totalCount">20</span> correct.</p>
  </div>
</div>

<div class="buttons">
  <a href="../practice.html">‚Üê Back to Practice</a>
  <a href="../index.html">üè† Home</a>
</div>

<script>
/* ===== Mobile nav toggle ===== */
const menuToggle = document.getElementById('menuToggle');
const navLinks = document.getElementById('primary-navigation');
if (menuToggle && navLinks) {
  menuToggle.addEventListener('click', () => {
    const expanded = menuToggle.getAttribute('aria-expanded') === 'true' || false;
    menuToggle.setAttribute('aria-expanded', !expanded);
    navLinks.classList.toggle('active');
  });
  navLinks.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      if (navLinks.classList.contains('active')) {
        navLinks.classList.remove('active');
        menuToggle.setAttribute('aria-expanded', false);
      }
    });
  });
}

/* ===== Utilities ===== */
const norm = s => (s || "")
  .toLowerCase()
  .replace(/[.,!?;:]/g, "")
  .replace(/\u2019/g,"'")
  .replace(/\s+/g, " ")
  .trim();

const isAuxOK = v => {
  const set = new Set([
    "have","has","had","get","gets","got",
    "am having","is having","are having",
    "am getting","is getting","are getting",
    "will have","will get",
    "to have","to get",
    "i'm having","we're having","she's having","he's having","they're having",
    "i'm getting","we're getting","she's getting","he's getting","they're getting"
  ]);
  const val = norm(v);
  if (set.has(val)) return true;
  return false;
};

/* ===== Data: Part A (12 items) with two blanks each ===== */
const partA = [
  { text: "I need to ____ my phone ____ by Friday. (repair)", part: "repaired" },
  { text: "She usually ____ her nails ____ before the weekend. (do)", part: "done" },
  { text: "We ____ our groceries ____ every Saturday morning. (deliver)", part: "delivered" },
  { text: "He‚Äôs going to ____ his watch ____; it stopped working. (fix)", part: "fixed" },
  { text: "They ____ their hair ____ for the wedding yesterday. (style)", part: "styled" },
  { text: "I‚Äôll ____ my suit ____ at the dry cleaners this afternoon. (clean)", part: "cleaned" },
  { text: "My sister ____ her car ____ last week; it looks brand new! (wash)", part: "washed" },
  { text: "We‚Äôre ____ our kitchen ____ next month. (paint)", part: "painted" },
  { text: "The company ____ their website ____ last year. (redesign)", part: "redesigned" },
  { text: "I just ____ my shoes ____ ‚Äî they look much better now. (polish)", part: "polished" },
  { text: "He wants to ____ his laptop ____ before the new project starts. (upgrade)", part: "upgraded" },
  { text: "We finally ____ our air conditioner ____ ‚Äî it‚Äôs working perfectly now! (repair)", part: "repaired" }
];

/* ===== Data: Part C (8 items) rewrite ===== */
const partC = [
  { base: "A mechanic repaired my car yesterday.",  obj: ["car"], part: ["repaired","fixed"], tense: "past" },
  { base: "A cleaner is washing our windows today.", obj: ["windows"], part: ["washed","cleaned"], tense: "pres-cont" },
  { base: "The tailor will make my dress next week.", obj: ["dress"], part: ["made","sewn","tailored"], tense: "future" },
  { base: "The store delivered the furniture last Friday.", obj: ["furniture"], part: ["delivered"], tense: "past" },
  { base: "The hairdresser cut Sarah‚Äôs hair this morning.", obj: ["sarah","hair"], part: ["cut","styled"], tense: "past" },
  { base: "The web designer updated our online shop.", obj: ["shop","store","online"], part: ["updated","redesigned","revamped"], tense: "past" },
  { base: "The electrician is checking our lights today.", obj: ["lights","lighting"], part: ["checked","inspected"], tense: "pres-cont" },
  { base: "A professional photographer took our family photos.", obj: ["photos","pictures"], part: ["taken","shot"], tense: "past" }
];

/* ===== Render Part A (NO placeholders) ===== */
const aList = document.getElementById('partAList');
partA.forEach((item, idx) => {
  const li = document.createElement('li');
  const aux = `<input type="text" class="blank-input short" aria-label="Auxiliary for item ${idx+1}" id="a${idx+1}x" />`;
  const part = `<input type="text" class="blank-input short" aria-label="Participle for item ${idx+1}" id="a${idx+1}y" />`;
  const fb = `<span id="afb-${idx+1}" class="inline-feedback"></span>`;
  li.innerHTML = `<span>${item.text.replace("____", aux).replace("____", part)}</span>${fb}`;
  aList.appendChild(li);
});

/* ===== Render Part C (NO placeholders) ===== */
const cList = document.getElementById('partCList');
partC.forEach((item, idx) => {
  const li = document.createElement('li');
  li.innerHTML = `
    <div><strong>Original:</strong> ${item.base}</div>
    <div style="margin-top:0.4rem;">
      <input type="text" class="blank-input" id="c${idx+1}" style="width:100%;" />
      <span id="cfb-${idx+1}" class="inline-feedback"></span>
    </div>
  `;
  cList.appendChild(li);
});

/* ===== Checking Logic ===== */
const A_PARTS = partA.reduce((acc, it, i) => (acc[i+1] = it.part, acc), {});
function checkPartA() {
  let correct = 0;
  for (let i=1;i<=12;i++){
    const ax = document.getElementById(`a${i}x`);
    const ay = document.getElementById(`a${i}y`);
    const fb = document.getElementById(`afb-${i}`);
    const auxOk = isAuxOK(ax.value);
    const partOk = norm(ay.value) === norm(A_PARTS[i]);

    ax.classList.remove('correct','incorrect');
    ay.classList.remove('correct','incorrect');

    if (auxOk) { ax.classList.add('correct'); } else { ax.classList.add('incorrect'); }
    if (partOk) { ay.classList.add('correct'); } else { ay.classList.add('incorrect'); }

    fb.className = 'inline-feedback ' + ((auxOk && partOk) ? 'correct' : 'incorrect');
    fb.textContent = (auxOk && partOk) ? ' ‚úì' : ' ‚úó';
    fb.style.display = 'inline';

    if (auxOk) correct++;
    if (partOk) correct++;
  }
  return correct; // out of 24
}

function hasCausative(t) {
  const s = norm(t);
  if (!/(have|has|had|get|gets|got|having|getting|will have|will get)\b/.test(s)) return false;
  // look for a likely participle
  if (!/\b(\w+ed|cut|done|made|taken|sewn|shot)\b/.test(s)) return false;
  return true;
}
function hasObj(t, obj) {
  const s = norm(t);
  if (Array.isArray(obj)) return obj.some(o => s.includes(o));
  return s.includes(obj);
}
function hasAnyPart(t, parts) {
  const s = norm(t);
  return parts.some(p => s.includes(p));
}
function checkPartC() {
  let correct = 0;
  partC.forEach((row, idx) => {
    const inp = document.getElementById(`c${idx+1}`);
    const fb = document.getElementById(`cfb-${idx+1}`);
    const s = inp.value;

    const okCaus = hasCausative(s);
    const okObj = hasObj(s, row.obj);
    const okPart = hasAnyPart(s, row.part);

    const okAll = okCaus && okObj && okPart;

    inp.classList.remove('correct','incorrect');
    inp.classList.add(okAll ? 'correct' : 'incorrect');

    fb.className = 'inline-feedback ' + (okAll ? 'correct' : 'incorrect');
    fb.textContent = okAll ? ' ‚úì' : ' ‚úó';
    fb.style.display = 'inline';

    if (okAll) correct++;
  });
  return correct; // out of 8
}

/* ===== Buttons ===== */
function checkAll(){
  const aScore = checkPartA();     // max 24
  const cScore = checkPartC();     // max 8
  const total = aScore + cScore;   // max 32
  document.getElementById('correctCount').textContent = `${(total/32*20).toFixed(1)} (‚âà out of 20)`;
  document.getElementById('results').style.display = 'block';
  document.getElementById('showAnswersBtn').style.display = 'inline-block';
  document.getElementById('submitBtn').style.display = 'none';
}

function toggleAnswers(){
  const btn = document.getElementById('showAnswersBtn');
  const showing = btn.textContent === 'Hide Answers';
  document.querySelectorAll('.inline-feedback').forEach(el => {
    el.style.display = showing ? 'none' : 'inline';
  });
  btn.textContent = showing ? 'Show Answers' : 'Hide Answers';
}

function resetAll(){
  // Part A
  for (let i=1;i<=12;i++){
    const ax = document.getElementById(`a${i}x`);
    const ay = document.getElementById(`a${i}y`);
    const fb = document.getElementById(`afb-${i}`);
    ax.value = ""; ay.value = "";
    ax.classList.remove('correct','incorrect');
    ay.classList.remove('correct','incorrect');
    fb.textContent = ""; fb.className = 'inline-feedback'; fb.style.display = 'none';
  }
  // Part C
  partC.forEach((_, idx) => {
    const inp = document.getElementById(`c${idx+1}`);
    const fb = document.getElementById(`cfb-${idx+1}`);
    inp.value = "";
    inp.classList.remove('correct','incorrect');
    fb.textContent = ""; fb.className = 'inline-feedback'; fb.style.display = 'none';
  });

  document.getElementById('results').style.display = 'none';
  const showBtn = document.getElementById('showAnswersBtn');
  showBtn.style.display = 'none';
  showBtn.textContent = 'Show Answers';
  document.getElementById('submitBtn').style.display = 'inline-block';
}

/* ===== Bind ===== */
document.getElementById('submitBtn').addEventListener('click', checkAll);
document.getElementById('showAnswersBtn').addEventListener('click', toggleAnswers);
document.getElementById('resetBtn').addEventListener('click', resetAll);

/* Initialize total count explicitly */
document.getElementById('totalCount').textContent = 20;
</script>
</body>
</html>
