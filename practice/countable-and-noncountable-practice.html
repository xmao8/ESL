<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="/favicon.png" type="image/png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Practice: Countable & Noncountable ‚Äì ESLnote</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet" />
  <style>
    *{box-sizing:border-box}
    body{font-family:'Segoe UI',sans-serif;background:#f4f4f9;text-align:center;margin:0;padding:0;overflow-x:hidden}
    nav{background:#124076;margin:0;padding:0}
    .nav-container{display:flex;align-items:center;justify-content:space-between;width:100%;max-width:1100px;margin:0 auto;padding:.8rem 1rem}
    .logo{display:flex;align-items:center;color:#ff9800;font-family:'Poppins',sans-serif;font-weight:700;font-size:1.3rem;text-decoration:none}
    .logo-img{width:32px;height:32px;margin-right:.5rem}
    .nav-links{display:flex;gap:1rem}
    .nav-links a{color:#fff;font-weight:700;text-decoration:none;transition:color .2s ease}
    .nav-links a:hover,.nav-links a:focus{color:#ffbb33;outline:none}
    .menu-toggle{display:none;flex-direction:column;gap:5px;background:none;border:none;cursor:pointer;padding:0}
    .menu-toggle .bar{width:25px;height:3px;background:#fff;border-radius:2px}

    /* Phone */
    @media (max-width:600px){
      .nav-links{position:fixed;top:56px;right:0;background:#124076;flex-direction:column;width:100%;height:calc(100vh - 56px);padding:1rem 1.5rem 2rem 1.5rem;gap:1.2rem;overflow-y:auto;transform:translateX(100%);transition:transform .3s ease;border-radius:0 0 0 10px;z-index:999;align-items:flex-start}
      .nav-links.active{transform:translateX(0)}
      .menu-toggle{display:flex}
      h1,.content-container,.buttons{padding:0 1rem}
    }
    /* Tablet */
    @media (min-width:601px) and (max-width:900px){
      .nav-container{padding:.8rem 1.5rem}
      .nav-links{position:static;flex-direction:row;background:none;height:auto;width:auto;padding:0;gap:1.3rem;transform:none !important;border-radius:0;align-items:center;overflow:visible}
      .menu-toggle{display:none}
      h1,.content-container,.buttons{padding:0 1.5rem}
    }
    /* Desktop */
    @media (min-width:901px){
      .nav-container{max-width:1100px;margin:0 auto;padding:.8rem 1rem}
      .nav-links{position:static;flex-direction:row;background:none;height:auto;width:auto;padding:0;gap:1.5rem;transform:none !important;border-radius:0;align-items:center;overflow:visible}
      .menu-toggle{display:none}
      body{padding:0}
      h1,.content-container,.buttons{padding:0}
    }

    h1{margin:2rem auto 1.5rem auto;color:#2c3e50;max-width:800px}
    .content-container{background:#fff;width:90%;max-width:850px;margin:2rem auto;padding:2rem;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1);text-align:left;line-height:1.6;font-size:1.05rem}
    .content-container h2{color:#3498db;margin-top:0;margin-bottom:1rem;font-size:1.4rem}
    .note{font-size:.98rem;color:#444;margin-top:-.5rem}

    .q{margin:0 0 1rem 0;padding:.8rem 1rem;background:#f8fbff;border:1px solid #e5eef9;border-radius:8px}
    .q label{display:block;margin-bottom:.4rem;color:#124076;font-weight:600}
    .q .prompt{display:block;margin-bottom:.5rem;color:#2c3e50}

    input[type="text"]{width:260px;max-width:100%;padding:.5rem .7rem;border:1px solid #cfd8e3;border-radius:8px;font-size:1rem}
    input[type="text"].correct{border-color:#2e7d32;background:#e8f5e9}
    input[type="text"].incorrect{border-color:#c62828;background:#ffebee}

    .feedback{display:inline-block;margin-left:.5rem;font-weight:700}
    .feedback.correct{color:#2e7d32}
    .feedback.incorrect{color:#c62828}

    .score{margin:1rem 0 0 0;font-weight:700;color:#2c3e50}

    .buttons{margin:2rem auto 3rem auto;display:flex;justify-content:center;gap:1rem;max-width:600px}
    .buttons a,.buttons button{padding:.6rem 1.2rem;background:#3498db;color:#fff;border:none;border-radius:8px;font-weight:bold;cursor:pointer;text-decoration:none;display:inline-block;user-select:none}
    .buttons a:hover,.buttons button:hover{background:#2980b9}
    .buttons button.secondary{background:#6c757d}
    .buttons button.secondary:hover{background:#5a6268}

    .key{margin-top:1.2rem;padding:1rem;background:#fff3cd;border-left:4px solid #ffca2c;border-radius:8px}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}
  </style>
</head>
<body>

<nav aria-label="Main navigation">
  <div class="nav-container">
    <a href="../index.html" class="logo" aria-label="ESLnote Home">
      <img src="/favicon.png" alt="ESLnote Logo" class="logo-img" />
      <span class="site-name">ESLnote</span>
    </a>

    <button id="menuToggle" class="menu-toggle" aria-controls="primary-navigation" aria-expanded="false" aria-label="Toggle menu">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>

    <div class="nav-links" id="primary-navigation">
      <a href="../index.html">Home</a>
      <a href="../flashcards.html">Flashcards</a>
      <a href="../conversation.html">Conversations</a>
      <a href="../grammar.html">Grammar</a>
      <a href="../reading.html">Reading</a>
      <a href="../listening.html">Listening</a>
      <a href="../practice.html">Practices</a>
    </div>
  </div>
</nav>

<h1>Practice: Countable & Noncountable Nouns (Fill‚Äëin‚Äëthe‚ÄëBlank)</h1>

<div class="content-container">
  <h2>Instructions</h2>
  <p class="note">Type the correct word or phrase in each blank. Answers are not case‚Äësensitive. Click <strong>Check Answers</strong> to see your score. You can also <strong>Show Answers</strong> or <strong>Reset</strong>.</p>

  <ol id="questions" aria-live="polite">
    <!-- Part A ‚Äì Articles & Plurals -->
    <li class="q"><span class="prompt">I need <input type="text" aria-label="Q1" data-q="1" /> apple from the basket. (a / an / some)</span></li>
    <li class="q"><span class="prompt">She bought three <input type="text" aria-label="Q2" data-q="2" /> at the bookstore. (book)</span></li>
    <li class="q"><span class="prompt">Can I have a piece of <input type="text" aria-label="Q3" data-q="3" />? (advice / advices)</span></li>
    <li class="q"><span class="prompt">There isn‚Äôt <input type="text" aria-label="Q4" data-q="4" /> milk in the fridge. (many / much)</span></li>
    <li class="q"><span class="prompt">They carried two big <input type="text" aria-label="Q5" data-q="5" /> of rice. (bag)</span></li>

    <!-- Part B ‚Äì Quantifiers -->
    <li class="q"><span class="prompt">How <input type="text" aria-label="Q6" data-q="6" /> chairs are in the classroom? (much / many)</span></li>
    <li class="q"><span class="prompt">We don‚Äôt have <input type="text" aria-label="Q7" data-q="7" /> sugar left. (many / much)</span></li>
    <li class="q"><span class="prompt">I only need <input type="text" aria-label="Q8" data-q="8" /> minutes to finish. (a few / a little)</span></li>
    <li class="q"><span class="prompt">The teacher gave us <input type="text" aria-label="Q9" data-q="9" /> homework today. (a few / a lot of)</span></li>
    <li class="q"><span class="prompt">We saw <input type="text" aria-label="Q10" data-q="10" /> interesting museums in Paris. (a little / several)</span></li>

    <!-- Part C ‚Äì Containers & Units -->
    <li class="q"><span class="prompt">Please buy two <input type="text" aria-label="Q11" data-q="11" /> of bread at the store. (loaf / loaves)</span></li>
    <li class="q"><span class="prompt">He drank three <input type="text" aria-label="Q12" data-q="12" /> of water after football. (glass)</span></li>
    <li class="q"><span class="prompt">Can you add a little <input type="text" aria-label="Q13" data-q="13" /> of salt to the soup? (bit / bits)</span></li>
    <li class="q"><span class="prompt">She packed five <input type="text" aria-label="Q14" data-q="14" /> of luggage for her trip. (piece / pieces)</span></li>
    <li class="q"><span class="prompt">Would you like a cup of <input type="text" aria-label="Q15" data-q="15" />? (coffee / coffees)</span></li>

    <!-- Part D ‚Äì Correct Usage in Sentences -->
    <li class="q"><span class="prompt">We don‚Äôt have <input type="text" aria-label="Q16" data-q="16" /> information about the exam. (many / much)</span></li>
    <li class="q"><span class="prompt">There are a lot of <input type="text" aria-label="Q17" data-q="17" /> waiting outside. (people / peoples)</span></li>
    <li class="q"><span class="prompt">I don‚Äôt have <input type="text" aria-label="Q18" data-q="18" /> money to buy that car. (many / much)</span></li>
    <li class="q"><span class="prompt">The students wrote two <input type="text" aria-label="Q19" data-q="19" /> for the newspaper. (article / articles)</span></li>
    <li class="q"><span class="prompt">I love listening to <input type="text" aria-label="Q20" data-q="20" /> when I study. (musics / music)</span></li>
  </ol>

  <div class="score" id="score" aria-live="polite">Score: 0 / 20</div>

  <div class="buttons" style="margin-top:1rem">
    <button id="checkBtn">Check Answers</button>
    <button id="showBtn" class="secondary">Show Answers</button>
    <button id="resetBtn" class="secondary">Reset</button>
  </div>

  <div class="buttons">
    <a href="../practice.html">‚Üê Back to Practice</a>
    <a href="../index.html">üè† Home</a>
  </div>

  <div class="key" id="key" hidden>
    <strong>Answer Key:</strong>
    <ol>
      <li>an</li><li>books</li><li>advice</li><li>much</li><li>bags</li>
      <li>many</li><li>much</li><li>a few</li><li>a lot of</li><li>several</li>
      <li>loaves</li><li>glasses</li><li>bit</li><li>pieces</li><li>coffee</li>
      <li>much</li><li>people</li><li>much</li><li>articles</li><li>music</li>
    </ol>
  </div>
</div>

<script>
  // Mobile nav toggle
  const menuToggle = document.getElementById('menuToggle');
  const navLinks = document.getElementById('primary-navigation');
  if (menuToggle && navLinks) {
    menuToggle.addEventListener('click', () => {
      const expanded = menuToggle.getAttribute('aria-expanded') === 'true' || false;
      menuToggle.setAttribute('aria-expanded', !expanded);
      navLinks.classList.toggle('active');
    });
    navLinks.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        if (navLinks.classList.contains('active')) {
          navLinks.classList.remove('active');
          menuToggle.setAttribute('aria-expanded', false);
        }
      });
    });
  }

  // Practice logic
  const expected = {
    1:["an"],
    2:["books"],
    3:["advice"],
    4:["much"],
    5:["bags"],
    6:["many"],
    7:["much"],
    8:["a few"],
    9:["a lot of","lots of"], // accept both
    10:["several"],
    11:["loaves"],
    12:["glasses"],
    13:["bit","a bit"], // accept with/without article
    14:["pieces"],
    15:["coffee","some coffee"],
    16:["much"],
    17:["people"],
    18:["much"],
    19:["articles"],
    20:["music"]
  };

  function normalize(str){
    return str.toLowerCase().replace(/\s+/g,' ').trim();
  }

  function check(){
    const inputs = document.querySelectorAll('input[type="text"][data-q]');
    let correct = 0;
    inputs.forEach(inp=>{
      const q = inp.getAttribute('data-q');
      const val = normalize(inp.value);
      const ok = expected[q].some(ans => normalize(ans) === val);
      inp.classList.remove('correct','incorrect');
      let fb = inp.nextElementSibling;
      if(!fb || !fb.classList || !fb.classList.contains('feedback')){
        fb = document.createElement('span');
        fb.className = 'feedback';
        inp.after(fb);
      }
      if(ok){
        correct++;
        inp.classList.add('correct');
        fb.textContent = '‚úì';
        fb.className = 'feedback correct';
        inp.setAttribute('aria-invalid','false');
      } else {
        inp.classList.add('incorrect');
        fb.textContent = '‚úó';
        fb.className = 'feedback incorrect';
        inp.setAttribute('aria-invalid','true');
      }
    });
    document.getElementById('score').textContent = `Score: ${correct} / 20`;
  }

  function showAnswers(){
    const inputs = document.querySelectorAll('input[type="text"][data-q]');
    inputs.forEach(inp=>{
      const q = inp.getAttribute('data-q');
      inp.value = expected[q][0];
      inp.classList.remove('incorrect');
      inp.classList.add('correct');
      let fb = inp.nextElementSibling;
      if(!fb || !fb.classList || !fb.classList.contains('feedback')){
        fb = document.createElement('span');
        fb.className = 'feedback';
        inp.after(fb);
      }
      fb.textContent = '‚úì';
      fb.className = 'feedback correct';
    });
    document.getElementById('score').textContent = 'Score: 20 / 20 (answers shown)';
    document.getElementById('key').hidden = false;
  }

  function resetAll(){
    const inputs = document.querySelectorAll('input[type="text"][data-q]');
    inputs.forEach(inp=>{
      inp.value='';
      inp.classList.remove('correct','incorrect');
      const fb = inp.nextElementSibling;
      if(fb && fb.classList && fb.classList.contains('feedback')) fb.textContent='';
      inp.removeAttribute('aria-invalid');
    });
    document.getElementById('score').textContent = 'Score: 0 / 20';
    document.getElementById('key').hidden = true;
  }

  document.getElementById('checkBtn').addEventListener('click', check);
  document.getElementById('showBtn').addEventListener('click', showAnswers);
  document.getElementById('resetBtn').addEventListener('click', resetAll);

  // Press Enter to move to next field
  document.querySelectorAll('input[type="text"][data-q]').forEach(inp=>{
    inp.addEventListener('keydown', e=>{
      if(e.key==='Enter'){
        e.preventDefault();
        const q = Number(inp.getAttribute('data-q'));
        const next = document.querySelector(`input[data-q="${q+1}"]`);
        if(next){ next.focus(); } else { check(); }
      }
    });
  });
</script>
</body>
</html>
